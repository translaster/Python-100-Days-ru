##  ## Операторы в языке Python

Python поддерживает большое количество операторов. В следующей таблице перечислены операторы Python в порядке убывания их приоритета. Используя переменные и операторы, вы можете строить самые разнообразные выражения для решения реальных задач. В информатике **выражение - это синтаксическая единица в компьютерной программе, состоящая из комбинации одной или нескольких констант, переменных, функций и операторов, которые могут быть интерпретированы и вычислены языком программирования для получения другого значения**. Неважно, понимаете ли вы это утверждение, но важно знать, что построение выражений очень важно, независимо от того, какой язык программирования вы используете.

| Оператор                                                     | Описание                       |
| ------------------------------------------------------------ | ------------------------------ |
| `[]`,`[:]`                                                  | Индексирование, срез           |
| `**`                                                         | Возведение в степень           |
| `~`,`+`,`-`                                              | Инверсия, положительный и отрицательный знак      |
| `*`,`/`,`%`,`//`                                       | Умножение, деление, остаток от деления, целочисленное деление            |
| `+`,`-`                                                    | Сложение, вычитание                        |
| `>>`,`<<`                                                  | Сдвиг вправо, сдвиг влево                    |
| `&`                                                          | Побитовое И                         |
| `^`,`|`                                                   | Исключающее ИЛИ, побитовое ИЛИ              |
| `<=`,`<`,`>`, `>=`                                      | Меньше или равно, меньше, больше, больше или равно |
| `==`,`!=`                                                   | Равно, не равно                  |
| `is`,`is not`                                               | Тождество                     |
| `in`,`not in`                                                | Оператор принадлежности                     |
| `not`,`or`,`and`                                             | Логические операторы                     |
| `=`,`+=`,`-=`,`*=`,`/=`,`%=`,`//=`,`**=`,`&=`,`\|=`,`^=`,`>>=`,`<<=` | Операторы присваивания             |

>**Описание***: Приоритет - это порядок выполнения операторов, определяющий что должно быть выполнено сначала, а что - после, если в выражении присутствует более одного оператора. При написании кода, если вы не можете определить приоритет операторов в выражении, вы можете использовать круглые скобки `()`, чтобы гарантировать, что операции будут выполняться в правильном порядке.

### Арифметические операторы

В Python есть множество арифметических операторов, включая наиболее известные: сложение, вычитание, умножение и деление, существует также оператор целочисленного деления, остаток от деления и возведения в степень. Следующий пример демонстрирует использование арифметических операторов.

```python
"""
Арифметические операторы

Version: 1.0
Author: Ло Хао
"""
print(321 + 12)     # Оператор сложения, вывод 333
print(321 - 12)     # Оператор вычитания， вывод 309
print(321 * 12)     # Оператор умножения， вывод 3852
print(321 / 12)     # Оператор деления, вывод 26.75
print(321 // 12)    # Оператор целочисленного деления， вывод26
print(321 % 12)     # Остаток от деления, вывод 9
print(321 ** 12)    # Возведение в степень, вывод 1196906950228928915420617322241
```

То, что арифметические операции требуют умножения и деления перед сложением и вычитанием, не отличается от того, что преподается в учебниках по математике, а значит, умножение и деление имеют приоритет перед сложением и вычитанием. Если есть еще и возведение в степень, то его приоритет выше, чем у умножения и деления. Если вы хотите изменить порядок выполнения арифметических операций, то можете использовать круглые скобки `()`  и выражение, записанное в скобках, будет выполнено первым, как показано в следующем примере.

```python
"""
Приоритет арифметических операций

Version: 1.0
Author: Ло Хао
"""
print(2 + 3 * 5)           # 17
print((2 + 3) * 5)         # 25
print((2 + 3) * 5 ** 2)    # 125
print(((2 + 3) * 5) ** 2)  # 625
```

### Оператор присваивания

Оператор присваивания - это, пожалуй, самый распространенный оператор, используемый для присвоения значения, указанного справа, переменной, указанной слева. Оператор присваивания также может быть объединен с арифметическими операторами выше, чтобы сформировать составной оператор присваивания, например, `a += b` эквивалентен `a = a + b`, а `a *= a + 2` эквивалентен `a = a * (a + 2)`. Следующий пример демонстрирует использование операторов присваивания и составных операторов присваивания.

```python
"""
Операторы присваивания и составные операторы присваивания

Version: 1.0
Author: Ло Хао
"""
a = 10
b = 3
a += b        # Эквивалентно： a = a + b
a *= a + 2    # Эквивалентно： a = a * (a + 2)
print(a)      # Давайте разберемся, что мы здесь получим.
```

Выражения, образованные операциями присваивания, сами по себе не дают никакого значения, а это значит, что если вы поместите выражение присваивания в функцию `print`, чтобы попытаться вывести значение выражения, то получите синтаксическую ошибку. Чтобы решить эту проблему, в Python 3.8 появился новый оператор присваивания `:=`, который мы называем моржовым оператором, и вы можете догадаться, почему он так называется. Оператор "морж" также присваивает значение в правой части оператора переменной в левой части, но, в отличие от оператора присваивания, значение в правой части оператора также является значением всего выражения, как видно из следующего кода.

```python
"""
Моржовый оператор

Version: 1.0
Author: Ло Хао
"""
# SyntaxError: invalid syntax
# print((a = 10))
# Моржовый оператор
print((a := 10))  # 10
print(a)          # 10
```

> **Подсказка**: Если вы не закомментируете код в строке 8 выше, то при выполнении кода вы увидите сообщение об ошибке `SyntaxError: invalid syntax`. Обратите внимание, что в этой строке кода мы поставили скобки вокруг `a = 10`, если вы случайно напишите `print(a = 10)`, вы увидите `TypeError: 'a' is an invalid keyword argument for print()`, когда мы будем говорить о функциях позже, вы поймете, что означает это сообщение об ошибке.

### Операторы сравнения и логические операторы

Операторы сравнения, также известные как реляционные операторы, включают `==`, `!=`, `<`, `>`, `<=`, `>=`, которые, я уверен, вам понятны с первого взгляда. Напоминаю, что для сравнения равенств используется `==`, обратите внимание, что здесь два знака равенства, потому что `=` - это оператор присваивания, о котором мы только что говорили выше. Для сравнения неравенств используется `! =`, что не то же самое, что $\small{\neq}$, используемое в учебниках по математике, и `<>` использовалось в Python 2 для обозначения неравенства; использование `<>` в Python 3 вызывает `SyntaxError`. Операторы сравнения дают булевы значения, либо `True`, либо `False`.

Существует три логических оператора: `and`, `or` и `not`. Оператор `and` буквально означает «И», поэтому оператор `and` объединяет два булевых значения или выражения, которые производят булевые значения, и, если оба булевых значения `True`, то результатом операции будет `True`; если одно из булевых значений слева или справа `False`, то конечным результатом операции будет `False`. Конечно, если булево значение слева от оператора `and` равно `False`, то конечный результат будет `False` независимо от булева значения справа, а булево значение справа от оператора будет пропущено (профессионально это называется замыканием, и если справа от `and` есть выражение, то оно не будет выполнено). `or` буквально означает «ИЛИ», поэтому оператор `or` также объединяет два булевых числа или выражения, которые производят булевые числа, и если любое из булевых чисел с обеих сторон равно `True`, то конечный результат будет `True`. Конечно, оператор `or` также является замыкающим, в том смысле, что если булево значение слева от него равно `True`, то булево значение справа от него замыкается (а если правой стороной `or` является выражение, то это выражение не выполняется). За оператором `not` может следовать булево значение; если булево значение или выражение, следующее за `not`, равно `True`, то результатом операции будет `False`; если булево значение или выражение, следующее за `not`, равно `False`, то результатом операции будет `True`.

```python
"""
Использование операторов сравнения и логических операторов

Version: 1.0
Author: Ло Хао
"""
flag0 = 1 == 1
flag1 = 3 > 2
flag2 = 2 < 1
flag3 = flag1 and flag2
flag4 = flag1 or flag2
flag5 = not flag0
print('flag0 =', flag0)     # flag0 = True
print('flag1 =', flag1)     # flag1 = True
print('flag2 =', flag2)     # flag2 = False
print('flag3 =', flag3)     # flag3 = False
print('flag4 =', flag4)     # flag4 = True
print('flag5 =', flag5)     # flag5 = False
print(flag1 and not flag2)  # True
print(1 > 2 or 2 == 3)      # False
```

> **Примечание**: Операторы сравнения имеют более высокий приоритет, чем операторы присваивания, поэтому `flag0 = 1 == 1` выше сначала выполняет `1 == 1`, чтобы получить булево значение `True`, а затем присваивает это значение переменной `flag0`. Функция `print` может выводить несколько значений, которые могут быть разделены символами `,`, а по умолчанию вывод разделяется пробелами.

### Использование операторов и выражений

#### Пример 1: Пересчет из Фаренгейта в Цельсий

> **Требование**: введите температуру по Фаренгейту, чтобы преобразовать ее в градусы Цельсия. Формула преобразования Фаренгейта в градусы Цельсия выглядит так: $\small{C = (F - 32) / 1.8}$.


```python
"""
Преобразование Фаренгейта в Цельсий

Version: 1.0
Author: Ло Хао
"""
f = float(input('Введите температуру в градусах Фаренгейта: '))
c = (f - 32) / 1.8
print('%.1fградусов по Фаренгейту = %.1fградусов Цельсия' % (f, c))
```

> **Примечание**: Функция `input` в приведенном выше коде используется для получения пользовательского ввода с клавиатуры, так как ввод является строкой, если вы хотите обработать его как десятичную дробь с плавающей точкой для последующих операций, то должны использовать метод преобразования типов, который мы объясняли в предыдущем уроке, и использовать функцию `float` для преобразования типа `str` в тип `float`.

В приведенном выше коде мы отформатировали вывод функции `print`. В строке вывода `print` есть два заполнителя `%.1f`, которые заменяются значениями двух переменных типа `float` в `(f, c)` после `%`, причем число с плавающей точкой сохраняет один знак после точки. Если в строке есть заполнитель `%d`, то он будет заменен значением типа `int`, а если в строке есть заполнитель `%s`, то он будет заменен значением типа `str`.

Помимо описанного выше способа форматирования вывода, вывод в Python может быть отформатирован следующим образом: нам дается строка с заполнителем, `f` перед строкой указывает, что строка должна быть отформатирована, где `{f:.1f}` и `{c:.1f}` можно рассматривать как `{f}` и `{c}` сначала, что означает, что вывод будет заменен на значения переменных `f` и `c`, а затем `:.1f`, чтобы указать, что это число с плавающей точкой с одной значащей цифрой после десятичной точки.

```python
"""
Преобразование Фаренгейта в Цельсий

Version: 1.1
Author: Ло Хао
"""
f = float(input('Введите температуру в градусах Фаренгейта: '))
c = (f - 32) / 1.8
print(f'{f:.1f}градусов по Фаренгейту = {c:.1f}градусов цельсия')
```

#### Пример 2: Вычисление окружности и площади круга

> **Требования**: Введите радиус ($\small{r}$) круга и вычислите его периметр ( $\small{2 \pi r}$ ) и площадь ( $\small{\pi r^{2}}$ ).

```python
"""
Вычислите окружность и площадь круга, введя радиус.

Version: 1.0
Author: Ло Хао
"""
radius = float(input('Введите радиус окружности: '))
perimeter = 2 * 3.1416 * radius
area = 3.1416 * radius * radius
print('Длина окружности: %.2f' % perimeter)
print('Площадь круга: %.2f' % area)
```

В Python есть встроенный модуль `math`, который определяет переменную `pi`, значением которой является число пи. Чтобы использовать эту встроенную в Python переменную `pi`, мы можем немного модифицировать приведенный выше код.

```python
"""
Вычислите окружность и площадь круга, введя радиус.

Version: 1.1
Author: Ло Хао
"""
import math

radius = float(input('Введите радиус окружности: '))
perimeter = 2 * math.pi * radius
area = math.pi * radius ** 2
print(f'Длина окружности: {perimeter:.2f}')
print(f'Площадь круга: {area:.2f}')
```

> **Примечание**: `import math` в приведенном выше коде означает импорт модуля `math`, и только после импорта этого модуля мы можем получить значение пи с помощью `math.pi`.

На самом деле есть и другой способ форматирования вывода, новая возможность, добавленная в Python 3.8, которую вы можете понять, посмотрев непосредственно на приведенный ниже код.

```python
"""
Вычислите окружность и площадь круга, введя радиус.

Version: 1.2
Author: 骆昊
"""
import math

radius = float(input('Введите радиус окружности: '))  # 输入: 5.5
perimeter = 2 * math.pi * radius
area = math.pi * radius ** 2
print(f'{perimeter = :.2f}')  # Вывод：perimeter = 34.56
print(f'{area = :.2f}')       # Вывод：area = 95.03
```

> **Примечание**: Если значение переменной `a` равно `9.87`, то значение строки `f'{a = }'` равно `a = 9.87`; а значение строки `f'{a = :.1f}'` равно `a = 9.9`. В этом форматированном выводе будет выведено как имя переменной, так и ее значение.

#### Пример 3: Определение високосного года

Требование: введите год после 1582 и определите, является ли он високосным.

```python
"""
Ввод года, вывод True для високосного года и False для невисокосного.

Version: 1.0
Author: Ло Хао
"""
year = int(input('Пожалуйста, введите год: '))
is_leap = year % 4 == 0 and year % 100 != 0 or year % 400 == 0
print(f'{is_leap = }')
```

> **Примечание**: Для григорианского календаря, который мы используем сегодня, правила определения високосных лет таковы: 1. год нашей эры, не кратный 4, является невисокосным годом; 2. год нашей эры, кратный 4, но не кратный 100, является високосным годом; 3. год нашей эры, кратный 400, является високосным годом. Григорианский календарь был введен папой Григорием XIII в октябре 1582 года как модификация и замена юлианского календаря, и мы должны помнить об этом при вводе года. Код выше определяет, является ли `year` кратным `4`, кратным `100` или кратным `400` с помощью `%`, а затем собирает три условия с помощью операторов `and` и `or`, причем первые два условия должны выполняться одновременно, а третье условие - комбинация первых двух условий, чтобы удовлетворять только одному из них.

### Резюме

Благодаря приведенным выше объяснениям и примерам, я думаю, вы почувствовали силу операторов и выражений. Многие проблемы в реальном программировании необходимо решать путем построения выражений, поэтому переменные, операторы и выражения являются чрезвычайно важной основой любого языка программирования. Если вы что-то не поняли в этом уроке, не спешите переходить к следующему, сначала оставьте сообщение в разделе комментариев, и я оперативно отвечу на ваши вопросы.
